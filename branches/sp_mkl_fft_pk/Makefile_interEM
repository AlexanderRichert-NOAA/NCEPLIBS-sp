LIB_i4r4 = libsp_i4r4.a
LIB_i4r8 = libsp_i4r8.a
LIB_i8r8 = libsp_i8r8.a

###include ../../../configure.hwrf
FFLAGS	=	-DsysLinux -DLINUX
FC = ifort
CP = /bin/cp
RM = /bin/rm
AR = /usr/bin/ar
.SUFFIXES: .o .f .F

OBJS = bll2ps.o spanaly.o spdz2uv.o speps.o spfft.o spfft1.o \
spfftpt.o spgradq.o spgradx.o spgrady.o splaplac.o \
splegend.o sppad.o spsynth.o sptez.o sptezd.o sptezm.o sptezmd.o sptezmv.o \
sptezv.o sptgpm.o sptgpmd.o sptgpmv.o sptgps.o sptgpsd.o sptgpsv.o sptgpt.o \
sptgptd.o sptgptsd.o sptgptv.o sptgptvd.o sptran.o sptrand.o sptranf.o sptranf0.o \
sptranf1.o sptranfv.o sptranv.o sptrun.o sptrund.o sptrung.o sptrungv.o sptrunl.o \
sptrunm.o sptrunmv.o sptruns.o sptrunsv.o sptrunv.o spuv2dz.o spvar.o spwget.o

OBJS1 = fftpack.o ncpus.o spffte.o splat.o dgef_dges.o

SRC_F77 = $(OBJS:.o=.f)

SRC_F = $(OBJS1:.o=.F)


ALL: $(LIB_i4r4) $(LIB_i4r8) $(LIB_i8r8)

.PHONY: ALL

$(LIB_i4r4): $(OBJS)
	$(FC) $(FFLAGS) $(FFLAGS_SINGLE) -c $(SRC_F) $(SRC_F77)
	$(AR) $(ARFLAGS) $(LIB_i4r4) $(OBJS) $(OBJS1)
	$(CP) $(LIB_i4r4) ../..
	$(RM) $(OBJS) $(OBJS1) 

$(LIB_i4r8): $(OBJS)
	$(FC) $(FFLAGS) $(FFLAGS_DOUBLE) -c $(SRC_F) $(SRC_F77)
	$(AR) $(ARFLAGS) $(LIB_i4r8) $(OBJS) $(OBJS1)
	$(CP) $(LIB_i4r8) ../..
	$(RM) $(OBJS) $(OBJS1)  

$(LIB_i8r8): $(OBJS)
        $(FC) $(FFLAGS) $(FFLAGS_SINGLE) -c $(SRC_F) $(SRC_F77)
        $(AR) $(ARFLAGS) $(LIB_i8r8) $(OBJS) $(OBJS1)
        $(CP) $(LIB_i8r8) ../..
        $(RM) $(OBJS) $(OBJS1)

clean:
	$(RM) $(OBJS) $(OBJS1) 

